---
name: cve-design-system-compat
description: Enforce compatibility with the CVE design-system token schema, variable mapping, and theme workflows.
license: MIT
compatibility: opencode
metadata:
  audience: cve-contributors
  domain: compatibility
---

## Scope
Align design and implementation decisions with:
- `~/Projects/nvim/synapsys-cve/packages/design-system/src/tokens/index.ts`
- `~/Projects/nvim/synapsys-cve/packages/design-system/src/theme/*`
- `~/Projects/nvim/synapsys-cve/packages/design-system/src/preset.css`

## Required token contract
- `colors`: `primary`, `secondary`, `accent`, `success`, `warning`, `error`, `info`, `neutrals[50..950]`
- `typography`: font families/sources/weights and scale keys
- `spacing`: `xs` to `3xl`
- `borderRadius`: `none` to `full`

## Variable mapping expectations
- Maintain CVE variable naming (`--color-*`, `--text-*`, `--spacing-*`, `--radius-*`).
- Preserve Tailwind v4 compatibility through tokenized variable output.
- Keep theme mode behavior compatible with `ThemeInjector` and `ThemeScope` merge model.

## Validation and safety
- Validate incoming token shapes at boundaries (schema-driven).
- Do not bypass token schema with unsafe casts.
- Keep color values CSS-safe and injection-resistant.

## Output format
1. `Schema compatibility status`
2. `Variable mapping status`
3. `Mode and cascade compatibility`
4. `Required fixes`
