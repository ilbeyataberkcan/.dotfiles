---
name: cve-design-system-compat
description: Enforce compatibility with the CVE design-system token schema, variable mapping, and theme workflows.
license: MIT
compatibility: opencode
metadata:
  audience: cve-contributors
  domain: compatibility
---
<skill_contract id="cve-design-system-compat" strict_order="true">
  <skill_definition>
    This skill ensures design outputs remain compatible with the CVE design-system contract. It validates schema shape, variable naming, and theme behavior so integrations do not break downstream consumers.
    When using this skill, the agent should treat CVE source files as authoritative references and emit explicit compatibility findings before accepting token or theme changes.
  </skill_definition>

  <resource_references>
    <resource path="~/Projects/nvim/synapsys-cve/packages/design-system/src/tokens/index.ts">Authoritative token schema.</resource>
    <resource path="~/Projects/nvim/synapsys-cve/packages/design-system/src/theme/*">Theme behavior and mode merge model.</resource>
    <resource path="~/Projects/nvim/synapsys-cve/packages/design-system/src/preset.css">Variable output compatibility baseline.</resource>
  </resource_references>

  <planning_language>
    <objective>Plan compatibility validation as schema-first mapping with explicit remediation outputs.</objective>
    <phase order="1">Load authoritative CVE token and theme sources.</phase>
    <phase order="2">Validate incoming shape against required token contract.</phase>
    <phase order="3">Verify variable mapping and mode compatibility rules.</phase>
    <phase order="4">Emit fix list for any incompatible contract points.</phase>
    <completion_signal>Compatibility status and remediation list are complete and traceable.</completion_signal>
  </planning_language>

  <scope>
    <source path="~/Projects/nvim/synapsys-cve/packages/design-system/src/tokens/index.ts" />
    <source path="~/Projects/nvim/synapsys-cve/packages/design-system/src/theme/*" />
    <source path="~/Projects/nvim/synapsys-cve/packages/design-system/src/preset.css" />
  </scope>

  <token_contract>
    <colors required="true">primary, secondary, accent, success, warning, error, info, neutrals-50-to-950</colors>
    <typography required="true">font families, sources, weights, and scale keys</typography>
    <spacing required="true">xs to 3xl</spacing>
    <border_radius required="true">none to full</border_radius>
  </token_contract>

  <mapping_rules>
    <rule>Preserve cve variable naming conventions.</rule>
    <rule>Maintain tailwind v4 compatibility through tokenized variable output.</rule>
    <rule>Preserve theme injector and theme scope merge behavior.</rule>
  </mapping_rules>

  <validation>
    <rule>Validate incoming token shapes at boundaries.</rule>
    <rule>Do not bypass schema with unsafe casts.</rule>
    <rule>Keep generated css values injection-safe.</rule>
  </validation>

  <outputs>
    <output>Schema compatibility status.</output>
    <output>Variable mapping status.</output>
    <output>Mode and cascade compatibility.</output>
    <output>Required fixes.</output>
  </outputs>
</skill_contract>
